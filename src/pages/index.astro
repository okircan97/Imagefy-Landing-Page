---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Main Page" additionalStylesheets={["/styles/styles.css"]}>
  <main>

    <!-- IntroSection -->
    <div id="middle-container-1-outer" class="middle-container-1-outer">
      <div class="middle-container-1-inner1">
        <div class="middle-container-1-inner">
          <br /><br /><br />
          <span class="big">Imagefy</span>
          <br /><br /><br />
          <span class="not_so_big"
            >is a web application that provides photos generated completely by AI.
            You can search our gallery to see example images.</span
          >
          <br><br><br><br><br><br><br>
          
          <!-- Search Bar -->
          <div class="custom_input">
            <svg xmlns="http://www.w3.org/2000/svg" class="svg_icon bi-search" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path></svg>
            <input class="input" type="text" placeholder="Placeholder Text">
          </div>

          <br><br><br><br><br><br>

          <!-- Carousel Section -->
          <div class="carousel">
            <div class="carousel-items">
              <div class="item">
                <img
                  class="right-img"
                  src="../images/1.png"
                  alt="arabic_woman01-img"
                />
              </div>
              <div class="item">
                  <img
                    class="right-img"
                    src="../images/2.png"
                    alt="arabic_woman01-img"
                  />            
              </div>
              <div class="item">
                  <img
                    class="right-img"
                    src="../images/3.png"
                    alt="arabic_woman01-img"
                  />            
              </div>
              <div class="item">
                <img
                  class="right-img"
                  src="../images/4.png"
                  alt="arabic_woman01-img"
                />            
              </div>
              <div class="item">
                <img
                  class="right-img"
                  src="../images/5.png"
                  alt="arabic_woman01-img"
                />            
              </div>
              <div class="item">
                <img
                  class="right-img"
                  src="../images/6.png"
                  alt="arabic_woman01-img"
                />            
              </div>
              <div class="item">
                <img
                  class="right-img"
                  src="../images/7.png"
                  alt="arabic_woman01-img"
                />            
              </div>
              <div class="item">
                <img
                  class="right-img"
                  src="../images/8.png"
                  alt="arabic_woman01-img"
                />            
              </div>
              <div class="item">
                <img
                  class="right-img"
                  src="../images/9.png"
                  alt="arabic_woman01-img"
                />            
              </div>
              <div class="item">
                <img
                  class="right-img"
                  src="../images/11.png"
                  alt="arabic_woman01-img"
                />            
              </div>
              <div class="item">
                <img
                  class="right-img"
                  src="../images/12.png"
                  alt="arabic_woman01-img"
                />            
              </div>
              <div class="item">
                <img
                  class="right-img"
                  src="../images/13.png"
                  alt="arabic_woman01-img"
                />            
              </div>
              <div class="item">
                <img
                  class="right-img"
                  src="../images/14.png"
                  alt="arabic_woman01-img"
                />            
              </div>
            </div>
            
            <!-- <button id="next">Forward</button>  
            <button id="prev">Back</button> -->
          </div>
        <br /><br /><br />
  
        <a href="/signup">
          <button class="btn-try">
            <h1 class="sign-in">Get Started!</h1>
          </button>
        </a>
        <br /><br /><br /><br /><br /><br />
        <hr>
      </div>
      </div>
      
      

    <!-- ImageSection -->
    <div id="middle-container-2" class="middle-container-2">
      <div class="container-left-img">
        <img
          class="left-img"
          src="../images/african_man01.png"
          alt="african_man01-img"
        />
      </div>

      <div class="container-between-imgs">
        <br /><br /><br />
        <span class="not_so_big">AI-generated images</span>
        <br /><br /><br />
        <span class="smol"
          >AI-generated images that are created from scratch are ideal for
          advertising, design, marketing, research, and machine learning!</span
        >
      </div>

      <div class="container-right-img">
        <img
          class="right-img"
          src="../images/arabic_woman01.png"
          alt="arabic_woman01-img"
        />
      </div>
    </div>

    <!-- FeatureSection -->
    <div id="middle-container-3" class="middle-container-3">
      <br /><br /><br />
      <div class="empty-2"></div>
      <div class="container-3-1">
        <br /><br />
        <span class="not_so_big">Automated generation</span>
        <br /><br /><br />
        <span class="really_smol"
          >Unleash the full potential of automated creativity with our
          state-of-the-art AI. Watch as it transforms your ideas into stunning
          visual realities with unparalleled ease and precision. Step into the
          future of digital artistry, where our Automated Generation is your
          personal artist, available 24/7 to bring your creative dreams to life.</span
        >
      </div>
      <div class="empty-1"></div>
      <div class="container-3-2">
        <br /><br />
        <span class="not_so_big">More than 80 races</span>
        <br /><br /><br />
        <span class="really_smol"
          >Celebrate the beauty of diversity with our extensive library,
          showcasing more than 80 races from around the globe. Every image is a
          window into a world of variety, designed to reflect the unique stories
          and cultures that enrich our planet. With just one click, you can
          connect with a vast array of ethnicities, bringing authenticity and
          inclusivity to your projects.</span
        >
      </div>
      <div class="empty-1"></div>
      <div class="container-3-3">
        <br /><br />
        <span class="not_so_big">Variety of ages</span>
        <br /><br /><br />
        <span class="really_smol"
          >Capture the full circle of life with our Variety of Ages feature. Our
          AI-generated images span from the fresh-faced spark of childhood to
          the weathered lines of wisdom that only years can bring. Whether for
          marketing campaigns or personal projects, our age-inclusive selections
          ensure you have access to the perfect image that resonates with every
          generation.</span
        >
      </div>
      <div class="empty-2"></div>
    </div>


    <!-- ExportSection -->
    <div id="middle-container-4" class="middle-container-4">
      <br /><br /><br />
      <div class="empty-2"></div>
      <div class="container-4-1">
        <br /><br />
        <span class="not_so_big">Image export</span>
        <br /><br /><br />
        <span class="really_smol"
          >Ready to see your AI-crafted images in the real world? Our Image
          Export feature empowers you to effortlessly transition from digital
          drafts to tangible masterpieces. Whether it's for professional
          portfolios, high-quality prints, or impactful presentations, exporting
          your images is just a matter of choice, not complexity.</span
        >
      </div>
      <div class="empty-1"></div>
      <div class="container-4-2">
        <img
          class="bottom-img"
          src="../images/white_woman01.png"
          alt="white_woman01-img"
        />
      </div>
      <div class="empty-1"></div>
      <div class="container-4-3">
        <br /><br />
        <span class="not_so_big">Download in bulks</span>
        <br /><br /><br />
        <span class="really_smol"
          >Why settle for less when you can have more? Our Bulk Download feature
          is a powerhouse, delivering a plethora of AI-generated images straight
          to your device. Ideal for those who need a large volume of visuals in
          record time, it's the perfect solution for clients who demand variety
          and volume without the wait.</span
        >
      </div>
      <div class="empty-2"></div>
    </div>
  </main>
</Layout>

<style>
  .carousel {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    width: 100%;
    height: 100%;
    /* overflow: hidden; */
  }

  .carousel-items {
    position: relative;
    width: 100%;
    height: 500px;
  }

  .item {
    position: absolute;
    width: 350px;
    height: 350px;
    text-align: justify;
    background: rgba(1,1,1,0.7);
    /* background: #2c3333; */
    border-radius: 10px;
    padding: 20px;
    transition: 0.5s;
    top: 15%;
    left: 50%;
    transform: translate(-50%, -50%); /* Center the item */
  }

  #next, #prev {
    position: absolute;
    top: 50%; /* Align vertically to the middle of the carousel */
    z-index: 2;
    cursor: pointer; /* Change cursor to pointer when hovering over the button */
  }

  #prev {
    left: 0; /* Align to the left end of the carousel */
  }

  #next {
    right: 0; /* Align to the right end of the carousel */
  }

  /* Search Bar */
  .custom_input {
	display: flex;
	align-items: center;
	position: relative;
	max-width: 100%;
  }

  .input {
    font-size: 18px;
    padding: 5px 10px;
    width: 100%;
    padding-left: 35px;
    outline: none;
    background: #FFFFFF;
    color: #000000;
    border: 1px solid #C4D1EB;
    border-radius: 5px;
    box-shadow: 3px 3px 2px 0px #E2E2E2;
    transition: .3s ease;
  }

  .input:focus {
    background: #F2F2F2;
    border: 1px solid #5A7EC7;
    border-radius: 10px;
  }

  .input::placeholder {
    color: #DDDDDD;
  }

  .svg_icon {
    position: absolute;
    left: 10px;
    fill: #4660DC;
    width: 18px;
    height: 18px;
  }
</style>

<script>

  // ------------------------------------------------------------------------------
  // ------------------------------ Carousel Stuff ------------------------------
  // ------------------------------------------------------------------------------
  function initCarousel() {      
    let items = Array.from(document.querySelectorAll('.carousel .item')).map(item => item as HTMLElement);
    // let next = document.getElementById('next');
    // let prev = document.getElementById('prev');

    // if (!next || !prev) {
    //   console.error('Carousel controls not found!');
    //   return;
    // }

    let active = 3; // assuming you have at least 4 items and want to start at the fourth

    function loadShow() {
      // Hide all items initially
      items.forEach(item => {
        item.style.transform = 'translateX(-50%) scale(0.5)'; // Scale down and hide
        item.style.opacity = '0';
        item.style.zIndex = '0';
      });

      // Calculate index positions for the surrounding items
      const totalItems = items.length;
      const prevIndex1 = (active - 1 + totalItems) % totalItems;
      const prevIndex2 = (active - 2 + totalItems) % totalItems;
      const nextIndex1 = (active + 1) % totalItems;
      const nextIndex2 = (active + 2) % totalItems;

      // Function to set styles for items (helper function)
      function setItemStyle(item: HTMLElement, zIndex: string, transform: string, opacity: string): void {
        item.style.transform = transform;
        item.style.opacity = opacity;
        item.style.display = 'block'; // Make sure item is visible
        item.style.zIndex = zIndex; // Set z-index based on active position
      }

      // Set styles for active item
      setItemStyle(items[active], '2','translateX(-50%) scale(1)', '1');

      // Set styles for items on the left
      setItemStyle(items[prevIndex1], '1', 'translateX(-120%) scale(0.8)', '0.6');
      setItemStyle(items[prevIndex2], '1', 'translateX(-170%) scale(0.6)', '0.4');

      // Set styles for items on the right
      setItemStyle(items[nextIndex1], '1', 'translateX(20%) scale(0.8)', '0.6');
      setItemStyle(items[nextIndex2], '1', 'translateX(70%) scale(0.6)', '0.4');

    }

    // Event listeners for next and previous buttons
    // next.onclick = function () {
    //   active = (active + 1) % items.length;
    //   loadShow();
    // }

    // prev.onclick = function () {
    //   active = (active - 1 + items.length) % items.length;
    //   loadShow();
    // }

    // Initial call to display carousel correctly on load
    loadShow();

    function moveToNextSlide() {
      active = (active + 1) % items.length;
      loadShow();
    }
    // Set the interval to automatically move to the next slide every 2000 milliseconds (2 seconds)
    setInterval(moveToNextSlide, 2000);
  }

  function setupCarouselOnPageLoad() {
    if (document.querySelector('.carousel')) {
      initCarousel();
    }
  }

  // Run the setup function on initial page load and every subsequent pageshow event
  window.addEventListener('load', setupCarouselOnPageLoad);
  window.addEventListener('pageshow', setupCarouselOnPageLoad);

  // ------------------------------------------------------------------------------
  // ------------------------------ Search Bar Stuff ------------------------------
  // ------------------------------------------------------------------------------
  document.addEventListener('DOMContentLoaded', function () {
  const phrases = [
    'Discover AI Art',
    'Explore Galleries',
    'Find Unique Images'
  ]; // Add more phrases as needed

  let currentPhraseIndex = 0;
  const typingDelay = 100; // Milliseconds
  const eraseDelay = 50; // Milliseconds
  const wordsDelay = 2000; // Milliseconds before typing next phrase
  const searchInput = document.querySelector('.input') as HTMLInputElement;

  function typePhrase(phrase: string, charIndex: number): void {
    if (charIndex < phrase.length) {
      setTimeout(() => {
        searchInput.value += phrase.charAt(charIndex);
        typePhrase(phrase, charIndex + 1);
      }, typingDelay);
    } else {
      setTimeout(erasePhrase, wordsDelay); // Wait before starting to erase text
    }
  }

  function erasePhrase(): void {
    let phrase = searchInput.value;
    if (phrase.length > 0) {
      setTimeout(() => {
        searchInput.value = phrase.substring(0, phrase.length - 1);
        erasePhrase();
      }, eraseDelay);
    } else {
      currentPhraseIndex = (currentPhraseIndex + 1) % phrases.length;
      setTimeout(() => typePhrase(phrases[currentPhraseIndex], 0), typingDelay);
    }
  }

  // Start the typing effect with the first phrase
  if (searchInput) {
    typePhrase(phrases[currentPhraseIndex], 0);
  }
});

</script>
